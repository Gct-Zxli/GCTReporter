# ç¨‹åºå‘˜æŠ¥è¡¨ç”Ÿæˆå·¥å…· - æ•°æ®åº“æ•°æ®å­—å…¸

> **ğŸ“Œ æ–‡æ¡£è¯´æ˜**ï¼šå®Œæ•´çš„æ•°æ®åº“è¡¨ç»“æ„è¯´æ˜ï¼ŒåŒ…å«æ‰€æœ‰è¡¨ã€å­—æ®µã€ç´¢å¼•å’Œå…³é”®ä¿¡æ¯
> **åˆ›å»ºæ—¥æœŸ**: 2025-12-26
> **ç‰ˆæœ¬**: v1.0
> **æ•°æ®åº“**: programmer_report
> **å­—ç¬¦é›†**: UTF8MB4
> **å¼•æ“**: InnoDB

---

## ğŸ“Š æ•°æ®åº“æ€»è§ˆ

| æŒ‡æ ‡ | å€¼ |
|------|-----|
| **æ•°æ®åº“å** | programmer_report |
| **è¡¨æ•°é‡** | 8ä¸ª |
| **å­—ç¬¦é›†** | utf8mb4 |
| **æ’åºè§„åˆ™** | utf8mb4_unicode_ci |
| **æ—¶åŒº** | UTC |
| **å­˜å‚¨å¼•æ“** | InnoDBï¼ˆæ”¯æŒäº‹åŠ¡å’Œå¤–é”®ï¼‰ |

---

## ğŸ“‹ è¡¨ç»“æ„è¯¦ç»†è¯´æ˜

### 1. è§’è‰²è¡¨ (role)

**ç”¨é€”**: å­˜å‚¨ç³»ç»Ÿè§’è‰²å®šä¹‰ï¼ˆADMINã€DESIGNERã€VIEWERï¼‰

**è¡¨å**: `role`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| id | INT | âœ… | è‡ªå¢ | è§’è‰²IDï¼Œä¸»é”® |
| role_name | VARCHAR(50) | âœ… | - | è§’è‰²åç§°ï¼ˆUNIQUEï¼‰ |
| description | VARCHAR(255) | âŒ | NULL | è§’è‰²æè¿° |
| created_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰ |

**ç´¢å¼•**:
- PRIMARY KEY: id
- UNIQUE KEY: role_name
- INDEX: idx_role_name(role_name)
- INDEX: idx_created_at(created_at)

**åˆå§‹åŒ–æ•°æ®**:
```
id=1: ADMIN     - ç³»ç»Ÿç®¡ç†å‘˜ï¼Œæ‹¥æœ‰æ‰€æœ‰æƒé™
id=2: DESIGNER  - æŠ¥è¡¨è®¾è®¡è€…ï¼Œå¯åˆ›å»ºå’Œè®¾è®¡æŠ¥è¡¨
id=3: VIEWER    - æ™®é€šç”¨æˆ·ï¼Œåªèƒ½æŸ¥çœ‹å·²æˆæƒæŠ¥è¡¨
```

**å®¹é‡ä¼°ç®—**:
- é¢„æœŸè®°å½•æ•°: 3-10 æ¡
- å¹³å‡æ¯æ¡å¤§å°: çº¦ 200 å­—èŠ‚
- æ€»å¤§å°: ä¸è¶…è¿‡ 1 KB

---

### 2. ç”¨æˆ·è¡¨ (user)

**ç”¨é€”**: å­˜å‚¨ç³»ç»Ÿç”¨æˆ·è´¦æˆ·ä¿¡æ¯

**è¡¨å**: `user`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| id | BIGINT | âœ… | è‡ªå¢ | ç”¨æˆ·IDï¼Œä¸»é”® |
| username | VARCHAR(50) | âœ… | - | ç™»å½•ç”¨æˆ·åï¼ˆUNIQUEï¼Œä¸åŒºåˆ†å¤§å°å†™ï¼‰ |
| password | VARCHAR(255) | âœ… | - | å¯†ç ï¼ˆBCryptåŠ å¯†å­˜å‚¨ï¼‰ |
| email | VARCHAR(100) | âŒ | NULL | ç”µå­é‚®ç®± |
| status | INT | âœ… | 1 | è´¦æˆ·çŠ¶æ€ï¼ˆ1:å¯ç”¨ï¼Œ0:ç¦ç”¨ï¼‰ |
| created_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰ |

**ç´¢å¼•**:
- PRIMARY KEY: id
- UNIQUE KEY: username
- INDEX: idx_username(username) - åŠ é€Ÿç™»å½•æŸ¥è¯¢
- INDEX: idx_email(email)
- INDEX: idx_status(status) - åŠ é€Ÿå¯ç”¨/ç¦ç”¨è´¦æˆ·æŸ¥è¯¢
- INDEX: idx_created_at(created_at)

**åˆå§‹åŒ–æ•°æ®**:
```
id=1: username=admin    | ç³»ç»Ÿç®¡ç†å‘˜ | status=1
id=2: username=designer | æŠ¥è¡¨è®¾è®¡è€… | status=1
id=3: username=viewer   | æ™®é€šç”¨æˆ·   | status=1
```

**å¯†ç è¯´æ˜**:
- å¯†ç é‡‡ç”¨ BCrypt ç®—æ³•åŠ å¯†å­˜å‚¨ï¼ˆä¸èƒ½åå‘è§£å¯†ï¼‰
- ç™»å½•æ—¶å¯¹æ¯”å¯†ç å“ˆå¸Œå€¼ï¼Œä¸å­˜å‚¨æ˜æ–‡å¯†ç 
- é»˜è®¤æµ‹è¯•å¯†ç : admin123, designer123, viewer123
- ç”Ÿäº§ç¯å¢ƒå¿…é¡»ä¿®æ”¹é»˜è®¤å¯†ç ï¼

**ä¸šåŠ¡è§„åˆ™**:
- username å¿…é¡»å”¯ä¸€ï¼Œç™»å½•æ—¶ä¸åŒºåˆ†å¤§å°å†™
- password æœ€å°‘ 8 å­—ç¬¦ï¼Œå¿…é¡»åŒ…å«å­—æ¯å’Œæ•°å­—
- email å¯é€‰ï¼Œç”¨äºå¯†ç é‡ç½®ç­‰åŠŸèƒ½
- status=0 çš„è´¦æˆ·æ— æ³•ç™»å½•

**å®¹é‡ä¼°ç®—**:
- åˆå§‹: 3 æ¡è®°å½•
- é¢„æœŸ(6ä¸ªæœˆ): 50-100 æ¡è®°å½•
- é¢„æœŸ(1å¹´): 200-500 æ¡è®°å½•
- æ¯æ¡å¤§å°: çº¦ 300 å­—èŠ‚

---

### 3. ç”¨æˆ·è§’è‰²å…³è”è¡¨ (user_role)

**ç”¨é€”**: å®ç°ç”¨æˆ·ä¸è§’è‰²çš„å¤šå¯¹å¤šå…³ç³»

**è¡¨å**: `user_role`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| user_id | BIGINT | âœ… | - | ç”¨æˆ·IDï¼Œå¤–é”®å¼•ç”¨userè¡¨ |
| role_id | INT | âœ… | - | è§’è‰²IDï¼Œå¤–é”®å¼•ç”¨roleè¡¨ |

**ç´¢å¼•**:
- PRIMARY KEY: (user_id, role_id) - å¤åˆä¸»é”®ï¼Œä¿è¯ä¸€ä¸ªç”¨æˆ·åªèƒ½æ‹¥æœ‰ä¸€ä¸ªè§’è‰²ï¼ˆåœ¨æ­¤ç³»ç»Ÿä¸­ï¼‰
- FOREIGN KEY: user_id â†’ user.id (ON DELETE CASCADE)
- FOREIGN KEY: role_id â†’ role.id (ON DELETE CASCADE)
- INDEX: idx_role_id(role_id) - åŠ é€Ÿåå‘æŸ¥è¯¢ï¼ˆæŸè§’è‰²æœ‰å“ªäº›ç”¨æˆ·ï¼‰

**åˆå§‹åŒ–æ•°æ®**:
```
user_id=1, role_id=1  (admin æ‹¥æœ‰ ADMIN è§’è‰²)
user_id=2, role_id=2  (designer æ‹¥æœ‰ DESIGNER è§’è‰²)
user_id=3, role_id=3  (viewer æ‹¥æœ‰ VIEWER è§’è‰²)
```

**ä¸šåŠ¡è§„åˆ™**:
- ç”¨æˆ·å’Œè§’è‰²çš„å…³ç³»æ˜¯å¤šå¯¹å¤šï¼ˆä¸€ä¸ªç”¨æˆ·å¯æ‹¥æœ‰å¤šä¸ªè§’è‰²ï¼‰
- ä½†åœ¨æœ¬MVPä¸­ï¼Œæ¯ä¸ªç”¨æˆ·ä»…åˆ†é…ä¸€ä¸ªè§’è‰²
- åˆ é™¤ç”¨æˆ·æ—¶è‡ªåŠ¨åˆ é™¤ç›¸å…³çš„è§’è‰²å…³è”ï¼ˆCASCADEï¼‰
- åˆ é™¤è§’è‰²æ—¶è‡ªåŠ¨åˆ é™¤ç›¸å…³çš„ç”¨æˆ·å…³è”ï¼ˆCASCADEï¼‰

**æ€§èƒ½ä¼˜åŒ–**:
- å¤åˆä¸»é”®ä¿è¯æ•°æ®å”¯ä¸€æ€§ï¼Œé¿å…é‡å¤æ’å…¥
- idx_role_id åŠ é€Ÿè§’è‰²ç»´åº¦çš„æŸ¥è¯¢

**å®¹é‡ä¼°ç®—**:
- åˆå§‹: 3 æ¡è®°å½•
- é¢„æœŸ(6ä¸ªæœˆ): 50-100 æ¡è®°å½•
- æ¯æ¡å¤§å°: çº¦ 16 å­—èŠ‚

---

### 4. æŠ¥è¡¨è¡¨ (report)

**ç”¨é€”**: å­˜å‚¨æŠ¥è¡¨å®šä¹‰ï¼ŒåŒ…æ‹¬SQLæŸ¥è¯¢è¯­å¥å’Œå…ƒä¿¡æ¯

**è¡¨å**: `report`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| id | BIGINT | âœ… | è‡ªå¢ | æŠ¥è¡¨IDï¼Œä¸»é”® |
| name | VARCHAR(100) | âœ… | - | æŠ¥è¡¨åç§° |
| description | TEXT | âŒ | NULL | æŠ¥è¡¨æè¿°ï¼ˆå¯ä»¥å¾ˆé•¿ï¼‰ |
| sql_content | LONGTEXT | âœ… | - | SQLæŸ¥è¯¢è¯­å¥ï¼ˆå®Œæ•´çš„SELECTè¯­å¥ï¼‰ |
| creator_id | BIGINT | âœ… | - | åˆ›å»ºè€…ç”¨æˆ·IDï¼Œå¤–é”®å¼•ç”¨userè¡¨ |
| created_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |
| updated_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | æ›´æ–°æ—¶é—´ï¼ˆè‡ªåŠ¨æ›´æ–°ï¼‰ |

**ç´¢å¼•**:
- PRIMARY KEY: id
- FOREIGN KEY: creator_id â†’ user.id (ON DELETE RESTRICT) - åˆ é™¤ç”¨æˆ·æ—¶ä¸å…è®¸åˆ é™¤æŠ¥è¡¨ï¼Œä¿æŠ¤æ•°æ®
- INDEX: idx_creator_id(creator_id) - åŠ é€ŸæŸ¥è¯¢ç”¨æˆ·åˆ›å»ºçš„æŠ¥è¡¨
- INDEX: idx_created_at(created_at) - åŠ é€Ÿæ—¶é—´èŒƒå›´æŸ¥è¯¢
- INDEX: idx_name(name) - åŠ é€ŸæŒ‰æŠ¥è¡¨åæœç´¢

**å­—æ®µè¯¦è§£**:

**name** (VARCHAR 100):
- æŠ¥è¡¨çš„æ˜¾ç¤ºåç§°
- ç¤ºä¾‹: "é”€å”®è®¢å•æŠ¥è¡¨"ã€"ç”¨æˆ·ç»Ÿè®¡æŠ¥è¡¨"
- åœ¨UIä¸­ä½œä¸ºæ ‡é¢˜æ˜¾ç¤º

**sql_content** (LONGTEXT):
- å®Œæ•´çš„SQL SELECTè¯­å¥
- æ”¯æŒå‚æ•°å ä½ç¬¦ï¼Œæ ¼å¼: `#{paramName}`
- ç¤ºä¾‹:
  ```sql
  SELECT order_id, customer_name, amount 
  FROM orders 
  WHERE order_date >= #{startDate} 
    AND order_date <= #{endDate}
  ```
- é™åˆ¶: æœ€å¤š 10000 å­—ç¬¦

**creator_id** (BIGINT):
- æŠ¥è¡¨çš„åˆ›å»ºè€…ç”¨æˆ·ID
- åˆ›å»ºè€…è‡ªåŠ¨æ‹¥æœ‰è¯¥æŠ¥è¡¨çš„æ‰€æœ‰æƒé™
- åˆ é™¤æŠ¥è¡¨æ—¶ä¸è‡ªåŠ¨åˆ é™¤ç”¨æˆ·ï¼ˆä¿æŠ¤ç”¨æˆ·æ•°æ®ï¼‰

**ä¸šåŠ¡è§„åˆ™**:
- æŠ¥è¡¨åç§°å»ºè®®åŒ…å«ä¸šåŠ¡å«ä¹‰ï¼Œä¾¿äºç”¨æˆ·ç†è§£
- SQLè¯­å¥å¿…é¡»æ˜¯SELECTæŸ¥è¯¢ï¼ˆä¸èƒ½åŒ…å«DDL/DMLï¼‰
- å‚æ•°å ä½ç¬¦å¿…é¡»ä¸report_paramè¡¨ä¸­å®šä¹‰çš„å‚æ•°å¯¹åº”
- æŠ¥è¡¨åˆ›å»ºåå¯è¢«è®¾è®¡è€…ä¿®æ”¹ï¼Œä½†ä¸èƒ½åˆ é™¤å†å²ç‰ˆæœ¬ï¼ˆMVPä¸æ”¯æŒç‰ˆæœ¬æ§åˆ¶ï¼‰

**å®¹é‡ä¼°ç®—**:
- åˆå§‹: 0 æ¡è®°å½•
- é¢„æœŸ(3ä¸ªæœˆ): 10-20 æ¡æŠ¥è¡¨
- é¢„æœŸ(1å¹´): 50-100 æ¡æŠ¥è¡¨
- å¹³å‡æ¯æ¡: 500 å­—èŠ‚ ~ 2 KB ï¼ˆå–å†³äºSQLå¤æ‚åº¦ï¼‰
- æ€»å¤§å°(1å¹´): çº¦ 50-200 MB

---

### 5. æŠ¥è¡¨å‚æ•°è¡¨ (report_param)

**ç”¨é€”**: å®šä¹‰æŠ¥è¡¨çš„æŸ¥è¯¢å‚æ•°ï¼ˆå¦‚æ—¥æœŸã€åœ°åŒºã€é”€å”®å‘˜ç­‰ï¼‰

**è¡¨å**: `report_param`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| id | BIGINT | âœ… | è‡ªå¢ | å‚æ•°IDï¼Œä¸»é”® |
| report_id | BIGINT | âœ… | - | æŠ¥è¡¨IDï¼Œå¤–é”®å¼•ç”¨reportè¡¨ |
| param_name | VARCHAR(50) | âœ… | - | å‚æ•°åç§°ï¼ˆå¦‚startDateã€salesmanï¼‰ |
| param_type | VARCHAR(20) | âŒ | NULL | å‚æ•°ç±»å‹ï¼ˆString, Integer, Date, Decimal, Booleanï¼‰ |
| default_value | VARCHAR(255) | âŒ | NULL | å‚æ•°é»˜è®¤å€¼ |
| is_required | BOOLEAN | âœ… | FALSE | æ˜¯å¦ä¸ºå¿…å¡«å‚æ•° |
| created_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |

**ç´¢å¼•**:
- PRIMARY KEY: id
- FOREIGN KEY: report_id â†’ report.id (ON DELETE CASCADE) - åˆ é™¤æŠ¥è¡¨æ—¶è‡ªåŠ¨åˆ é™¤å‚æ•°
- UNIQUE KEY: (report_id, param_name) - åŒä¸€æŠ¥è¡¨å†…å‚æ•°åå”¯ä¸€
- INDEX: idx_report_id(report_id)

**å‚æ•°ç±»å‹è¯¦è§£**:

| ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ | SQLå ä½ç¬¦ |
|------|------|------|-----------|
| String | å­—ç¬¦ä¸²å‚æ•° | "å¼ ä¸‰"ã€"é”€å”®éƒ¨" | WHERE salesman = #{salesman} |
| Integer | æ•´æ•°å‚æ•° | 2025ã€1000 | WHERE year = #{year} |
| Date | æ—¥æœŸå‚æ•° | 2025-01-01 | WHERE order_date >= #{startDate} |
| Decimal | å°æ•°å‚æ•° | 99.99 | WHERE amount > #{minAmount} |
| Boolean | å¸ƒå°”å‚æ•° | true/false | WHERE is_active = #{isActive} |

**ä¸šåŠ¡è§„åˆ™**:
- å‚æ•°åç§°å¿…é¡»ä¸SQLä¸­çš„å ä½ç¬¦ä¸€è‡´ï¼ˆ#{paramName}ï¼‰
- å‚æ•°æœ€å¤š 100 ä¸ª
- å¿…å¡«å‚æ•°ç”¨æˆ·å¿…é¡»è¾“å…¥ï¼Œå¯é€‰å‚æ•°å¯ç•™ç©º
- é»˜è®¤å€¼ä½œä¸ºå‚æ•°è¡¨å•çš„åˆå§‹å€¼

**å®¹é‡ä¼°ç®—**:
- åˆå§‹: 0 æ¡è®°å½•
- å¹³å‡æ¯ä¸ªæŠ¥è¡¨: 3-5 ä¸ªå‚æ•°
- é¢„æœŸ(1å¹´): 150-500 æ¡å‚æ•°è®°å½•
- æ¯æ¡å¤§å°: çº¦ 150 å­—èŠ‚

**æŸ¥è¯¢ç¤ºä¾‹**:
```sql
-- æŸ¥è¯¢æŸä¸ªæŠ¥è¡¨çš„æ‰€æœ‰å‚æ•°
SELECT * FROM report_param 
WHERE report_id = 1 
ORDER BY id;

-- æŸ¥è¯¢å¿…å¡«å‚æ•°
SELECT * FROM report_param 
WHERE report_id = 1 AND is_required = TRUE;
```

---

### 6. æŠ¥è¡¨åˆ—é…ç½®è¡¨ (report_column)

**ç”¨é€”**: å®šä¹‰æŠ¥è¡¨ç»“æœé›†ä¸­å„åˆ—çš„æ˜¾ç¤ºæ–¹å¼ï¼ˆåç§°ã€å®½åº¦ã€æ ¼å¼ç­‰ï¼‰

**è¡¨å**: `report_column`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| id | BIGINT | âœ… | è‡ªå¢ | åˆ—é…ç½®IDï¼Œä¸»é”® |
| report_id | BIGINT | âœ… | - | æŠ¥è¡¨IDï¼Œå¤–é”®å¼•ç”¨reportè¡¨ |
| field_name | VARCHAR(100) | âœ… | - | æ•°æ®åº“å­—æ®µåï¼ˆSQLä¸­çš„åˆ—åï¼‰ |
| display_name | VARCHAR(100) | âŒ | NULL | æ˜¾ç¤ºåç§°ï¼ˆå‰ç«¯æ˜¾ç¤ºçš„åˆ—åï¼‰ |
| column_width | INT | âœ… | 100 | åˆ—å®½ï¼ˆåƒç´ ï¼ŒèŒƒå›´50-500ï¼‰ |
| format_type | VARCHAR(20) | âŒ | NULL | æ ¼å¼åŒ–ç±»å‹ï¼ˆdate, number, currency, percentï¼‰ |
| sort_order | INT | âœ… | 0 | æ’åºé¡ºåºï¼ˆ0è¡¨ç¤ºç¬¬ä¸€åˆ—ï¼‰ |
| is_visible | BOOLEAN | âœ… | TRUE | æ˜¯å¦æ˜¾ç¤º |
| created_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | åˆ›å»ºæ—¶é—´ |

**ç´¢å¼•**:
- PRIMARY KEY: id
- FOREIGN KEY: report_id â†’ report.id (ON DELETE CASCADE)
- UNIQUE KEY: (report_id, field_name) - åŒä¸€æŠ¥è¡¨å†…å­—æ®µåå”¯ä¸€
- INDEX: idx_report_id(report_id)

**æ ¼å¼åŒ–ç±»å‹è¯¦è§£**:

| æ ¼å¼ç±»å‹ | è¯´æ˜ | ç¤ºä¾‹ | é…ç½® |
|---------|------|------|------|
| date | æ—¥æœŸæ ¼å¼ | 2025-12-26 | format: "yyyy-MM-dd" |
| number | æ•°å­—æ ¼å¼ | 1,234.50 | decimals: 2, thousandsSeparator: true |
| currency | è´§å¸æ ¼å¼ | Â¥1,234.50 | currency: "CNY", decimals: 2 |
| percent | ç™¾åˆ†æ¯” | 99.5% | decimals: 1 |
| text | æ–‡æœ¬ï¼ˆé»˜è®¤ï¼‰ | é”€å”®éƒ¨ | - |

**ä¸šåŠ¡è§„åˆ™**:
- field_name å¿…é¡»ä¸SQLæŸ¥è¯¢ç»“æœä¸­çš„åˆ—åä¸€è‡´
- display_name ç¼ºçœæ—¶ä½¿ç”¨ field_name ä½œä¸ºæ˜¾ç¤ºå
- column_width èŒƒå›´ 50-500 åƒç´ 
- sort_order ä» 0 å¼€å§‹é€’å¢ï¼Œè¡¨ç¤ºåˆ—çš„å·¦â†’å³é¡ºåº
- is_visible=false çš„åˆ—åœ¨å‰ç«¯éšè—ä½†æ•°æ®ä»ä¿å­˜
- è‡³å°‘éœ€è¦æ˜¾ç¤ºä¸€åˆ—ï¼ˆä¸èƒ½å…¨éƒ¨éšè—ï¼‰

**å®¹é‡ä¼°ç®—**:
- åˆå§‹: 0 æ¡è®°å½•
- å¹³å‡æ¯ä¸ªæŠ¥è¡¨: 5-15 åˆ—
- é¢„æœŸ(1å¹´): 250-1500 æ¡åˆ—è®°å½•
- æ¯æ¡å¤§å°: çº¦ 200 å­—èŠ‚

**æŸ¥è¯¢ç¤ºä¾‹**:
```sql
-- æŸ¥è¯¢æŠ¥è¡¨çš„æ‰€æœ‰åˆ—é…ç½®
SELECT * FROM report_column 
WHERE report_id = 1 
ORDER BY sort_order;

-- æŸ¥è¯¢å¯è§çš„åˆ—
SELECT * FROM report_column 
WHERE report_id = 1 AND is_visible = TRUE 
ORDER BY sort_order;
```

---

### 7. æŠ¥è¡¨è§’è‰²æƒé™è¡¨ (report_role)

**ç”¨é€”**: ç®¡ç†æŠ¥è¡¨ä¸è§’è‰²çš„æƒé™å…³ç³»ï¼Œå†³å®šå“ªäº›è§’è‰²å¯ä»¥æŸ¥çœ‹å“ªäº›æŠ¥è¡¨

**è¡¨å**: `report_role`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| report_id | BIGINT | âœ… | - | æŠ¥è¡¨IDï¼Œå¤–é”®å¼•ç”¨reportè¡¨ |
| role_id | INT | âœ… | - | è§’è‰²IDï¼Œå¤–é”®å¼•ç”¨roleè¡¨ |
| created_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | æˆæƒæ—¶é—´ |

**ç´¢å¼•**:
- PRIMARY KEY: (report_id, role_id) - å¤åˆä¸»é”®
- FOREIGN KEY: report_id â†’ report.id (ON DELETE CASCADE)
- FOREIGN KEY: role_id â†’ role.id (ON DELETE CASCADE)
- INDEX: idx_role_id(role_id)

**æƒé™è§„åˆ™**:

| è§’è‰² | æƒé™ | è¯´æ˜ |
|------|------|------|
| ADMIN | æ‰€æœ‰æŠ¥è¡¨ | ä¸éœ€è¦åœ¨report_roleè¡¨ä¸­é…ç½®ï¼Œè‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰æƒé™ |
| DESIGNER | è‡ªå·±åˆ›å»ºçš„æŠ¥è¡¨ + å·²æˆæƒæŠ¥è¡¨ | åˆ›å»ºè€…è‡ªåŠ¨æ‹¥æœ‰æƒé™ï¼›ç®¡ç†å‘˜å¯æˆæƒå…¶ä»–æŠ¥è¡¨ |
| VIEWER | å·²æˆæƒæŠ¥è¡¨ | åªèƒ½æŸ¥çœ‹ç®¡ç†å‘˜æˆæƒçš„æŠ¥è¡¨ |

**ä¸šåŠ¡è§„åˆ™**:
- ADMIN è§’è‰²çš„ç”¨æˆ·è‡ªåŠ¨æ‹¥æœ‰æ‰€æœ‰æŠ¥è¡¨çš„æŸ¥çœ‹æƒé™ï¼Œæ— éœ€åœ¨æ­¤è¡¨é…ç½®
- DESIGNER çš„åˆ›å»ºè€…è‡ªåŠ¨æ‹¥æœ‰æƒé™ï¼Œä¸éœ€è¦è®°å½•åœ¨æ­¤è¡¨
- VIEWER ç”¨æˆ·å¿…é¡»é€šè¿‡æ­¤è¡¨æˆæƒæ‰èƒ½æŸ¥çœ‹
- ä¸€ä¸ªæŠ¥è¡¨å¯ä»¥æˆæƒç»™å¤šä¸ªè§’è‰²
- åˆ é™¤æŠ¥è¡¨æ—¶è‡ªåŠ¨åˆ é™¤æ‰€æœ‰æƒé™è®°å½•ï¼ˆCASCADEï¼‰

**å®¹é‡ä¼°ç®—**:
- åˆå§‹: 0 æ¡è®°å½•
- å¹³å‡æ¯ä¸ªæŠ¥è¡¨: 1-3 ä¸ªè§’è‰²æˆæƒ
- é¢„æœŸ(1å¹´): 50-300 æ¡æƒé™è®°å½•
- æ¯æ¡å¤§å°: çº¦ 16 å­—èŠ‚

**æŸ¥è¯¢ç¤ºä¾‹**:
```sql
-- æŸ¥è¯¢æŠ¥è¡¨è¢«æˆæƒç»™äº†å“ªäº›è§’è‰²
SELECT r.role_name FROM report_role rr
JOIN role r ON rr.role_id = r.id
WHERE rr.report_id = 1;

-- æŸ¥è¯¢æŸè§’è‰²å¯ä»¥æŸ¥çœ‹çš„æ‰€æœ‰æŠ¥è¡¨
SELECT r.* FROM report r
WHERE EXISTS (
    SELECT 1 FROM report_role rr 
    WHERE rr.report_id = r.id AND rr.role_id = 2
);
```

---

### 8. æ“ä½œå®¡è®¡æ—¥å¿—è¡¨ (audit_log)

**ç”¨é€”**: è®°å½•ç³»ç»Ÿä¸­çš„æ‰€æœ‰é‡è¦æ“ä½œï¼ˆç™»å½•ã€æŠ¥è¡¨ä¿®æ”¹ã€æƒé™å˜æ›´ç­‰ï¼‰ï¼Œç”¨äºå®‰å…¨å®¡è®¡å’Œé—®é¢˜è¿½è¸ª

**è¡¨å**: `audit_log`

**å­—æ®µæ¸…å•**:

| å­—æ®µå | ç±»å‹ | éç©º | é»˜è®¤å€¼ | è¯´æ˜ |
|--------|------|------|--------|------|
| id | BIGINT | âœ… | è‡ªå¢ | æ—¥å¿—IDï¼Œä¸»é”® |
| user_id | BIGINT | âŒ | NULL | æ“ä½œç”¨æˆ·IDï¼Œå¤–é”®å¼•ç”¨userè¡¨ï¼ˆå¯ä¸ºç©ºï¼‰ |
| operation | VARCHAR(50) | âŒ | NULL | æ“ä½œç±»å‹ï¼ˆlogin, logout, create_reportç­‰ï¼‰ |
| resource_type | VARCHAR(50) | âŒ | NULL | èµ„æºç±»å‹ï¼ˆuser, report, roleç­‰ï¼‰ |
| resource_id | VARCHAR(100) | âŒ | NULL | èµ„æºIDï¼ˆå¦‚æŠ¥è¡¨IDï¼‰ |
| details | LONGTEXT | âŒ | NULL | æ“ä½œè¯¦æƒ…ï¼ˆJSONæ ¼å¼ï¼‰ |
| created_at | TIMESTAMP | âœ… | CURRENT_TIMESTAMP | æ“ä½œæ—¶é—´ |

**ç´¢å¼•**:
- PRIMARY KEY: id
- FOREIGN KEY: user_id â†’ user.id (ON DELETE SET NULL) - åˆ é™¤ç”¨æˆ·æ—¶æ—¥å¿—è®°å½•ä¿ç•™ï¼Œuser_idè®¾ä¸ºNULL
- INDEX: idx_user_id(user_id)
- INDEX: idx_created_at(created_at)
- INDEX: idx_operation(operation)
- INDEX: idx_resource_type(resource_type)
- INDEX: idx_resource_id(resource_id)

**æ“ä½œç±»å‹**:

| æ“ä½œç±»å‹ | è¯´æ˜ | åœºæ™¯ |
|---------|------|------|
| login | ç”¨æˆ·ç™»å½• | ç”¨æˆ·æˆåŠŸç™»å½•ç³»ç»Ÿ |
| logout | ç”¨æˆ·ç™»å‡º | ç”¨æˆ·ä¸»åŠ¨ç™»å‡ºæˆ–ä¼šè¯è¿‡æœŸ |
| create_report | åˆ›å»ºæŠ¥è¡¨ | è®¾è®¡è€…åˆ›å»ºæ–°æŠ¥è¡¨ |
| update_report | ä¿®æ”¹æŠ¥è¡¨ | è®¾è®¡è€…ä¿®æ”¹å·²æœ‰æŠ¥è¡¨ |
| delete_report | åˆ é™¤æŠ¥è¡¨ | è®¾è®¡è€…æˆ–ç®¡ç†å‘˜åˆ é™¤æŠ¥è¡¨ |
| execute_query | æ‰§è¡ŒæŸ¥è¯¢ | ç”¨æˆ·æ‰§è¡ŒæŠ¥è¡¨æŸ¥è¯¢ |
| update_permission | ä¿®æ”¹æƒé™ | ç®¡ç†å‘˜ä¿®æ”¹æŠ¥è¡¨æƒé™ |
| export_data | å¯¼å‡ºæ•°æ® | ç”¨æˆ·å¯¼å‡ºæŸ¥è¯¢ç»“æœ |
| update_password | ä¿®æ”¹å¯†ç  | ç”¨æˆ·ä¿®æ”¹ç™»å½•å¯†ç  |
| update_user_status | ä¿®æ”¹ç”¨æˆ·çŠ¶æ€ | ç®¡ç†å‘˜å¯ç”¨/ç¦ç”¨ç”¨æˆ· |

**detailså­—æ®µç¤ºä¾‹**:

```json
{
  "operation": "create_report",
  "report_name": "é”€å”®è®¢å•æŠ¥è¡¨",
  "sql_length": 350,
  "param_count": 3,
  "status": "success"
}

{
  "operation": "execute_query",
  "report_id": 1,
  "query_time_ms": 1234,
  "result_rows": 500,
  "status": "success"
}

{
  "operation": "login",
  "username": "designer",
  "ip_address": "192.168.1.100",
  "status": "success"
}
```

**ä¸šåŠ¡è§„åˆ™**:
- æ‰€æœ‰ç™»å½•æ“ä½œå¿…é¡»è®°å½•
- æ‰€æœ‰æŠ¥è¡¨ä¿®æ”¹å¿…é¡»è®°å½•
- æ‰€æœ‰æƒé™å˜æ›´å¿…é¡»è®°å½•
- ç”¨æˆ·IDå¯ä¸ºç©ºï¼ˆç³»ç»Ÿæ“ä½œæˆ–ç”¨æˆ·å·²åˆ é™¤ï¼‰
- details é‡‡ç”¨ JSON æ ¼å¼å­˜å‚¨ï¼Œä¾¿äºæ‰©å±•
- å®¡è®¡æ—¥å¿—ä¸€æ—¦å†™å…¥ä¸åº”ä¿®æ”¹ï¼ˆä»…æŸ¥è¯¢å’Œåˆ é™¤ï¼‰

**å®¹é‡ä¼°ç®—**:
- åˆå§‹: 0 æ¡è®°å½•
- æ—¥å‡æ“ä½œæ•°: 10-50 æ¡ï¼ˆå–å†³äºç”¨æˆ·æ´»è·ƒåº¦ï¼‰
- é¢„æœŸ(1å¹´): 3650-18250 æ¡è®°å½•
- æ¯æ¡å¤§å°: çº¦ 300-500 å­—èŠ‚
- æ€»å¤§å°(1å¹´): çº¦ 1-10 MB
- **å»ºè®®**: å®šæœŸæ¸…ç†è¿‡æœŸæ—¥å¿—ï¼ˆå¦‚>90å¤©ï¼‰ï¼Œé¿å…è¡¨è¿‡å¤§

**æ€§èƒ½ä¼˜åŒ–**:
- created_at ç´¢å¼•åŠ é€Ÿæ—¶é—´èŒƒå›´æŸ¥è¯¢
- idx_user_id åŠ é€ŸæŸ¥è¯¢ç”¨æˆ·çš„æ“ä½œå†å²
- idx_resource_id åŠ é€ŸæŸ¥è¯¢ç‰¹å®šèµ„æºçš„ä¿®æ”¹å†å²
- å¯è€ƒè™‘å¯¹audit_logè¿›è¡Œå®šæœŸåˆ†åŒºï¼ˆæŒ‰æœˆä»½ï¼‰

**æŸ¥è¯¢ç¤ºä¾‹**:
```sql
-- æŸ¥è¯¢ä»Šå¤©çš„æ‰€æœ‰ç™»å½•æ“ä½œ
SELECT * FROM audit_log 
WHERE operation = 'login' 
  AND DATE(created_at) = CURDATE() 
ORDER BY created_at DESC;

-- æŸ¥è¯¢æŸç”¨æˆ·çš„æ“ä½œå†å²
SELECT * FROM audit_log 
WHERE user_id = 1 
ORDER BY created_at DESC 
LIMIT 100;

-- æŸ¥è¯¢æŸæŠ¥è¡¨çš„ä¿®æ”¹å†å²
SELECT * FROM audit_log 
WHERE resource_type = 'report' 
  AND resource_id = '1' 
ORDER BY created_at DESC;

-- æŸ¥è¯¢æœ€è¿‘7å¤©æ‰§è¡ŒæŸ¥è¯¢æœ€é¢‘ç¹çš„æŠ¥è¡¨
SELECT resource_id, COUNT(*) AS query_count 
FROM audit_log 
WHERE operation = 'execute_query' 
  AND created_at >= DATE_SUB(NOW(), INTERVAL 7 DAY) 
GROUP BY resource_id 
ORDER BY query_count DESC 
LIMIT 10;
```

---

## ğŸ“ˆ è¡¨é—´å…³ç³»å›¾ï¼ˆERå›¾ï¼‰

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚       role          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (PK)             â”‚
â”‚ role_name (UNIQUE)  â”‚
â”‚ description         â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
           â”‚
           â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
           â”‚                  â”‚
    (FK)   â”‚           (FK)   â”‚
      â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”
      â”‚ user_role â”‚     â”‚report_roleâ”‚
      â””â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜     â””â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”˜
        â”‚    â”‚            â”‚    â”‚
   (FK) â”‚    â”‚            â”‚    â”‚ (FK)
        â”‚    â”‚     (FK)   â”‚    â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”  â”‚      â”Œâ”€â”€â”€â”€â”€â–¼â”€â”€â”â”‚
   â”‚ user â”‚  â”‚      â”‚ report â”‚â”‚
   â””â”€â”€â”€â”€â”¬â”€â”˜  â”‚      â””â”€â”€â”€â”€â”¬â”€â”€â”€â”˜â”‚
        â”‚    â”‚           â”‚    â”‚
        â”‚    â”‚    (FK)   â”‚    â”‚
        â”‚    â”‚    â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â” â”‚
        â”‚    â”‚    â”‚  audit_ â”‚ â”‚
        â”‚    â”‚    â”‚   log   â”‚ â”‚
        â”‚    â”‚    â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
   (FK) â”‚    â”‚                â”‚
   â”Œâ”€â”€â”€â”€â–¼â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
   â”‚   report_param    â”‚      â”‚
   â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚
                              â”‚
                         (FK) â”‚
                       â”Œâ”€â”€â”€â”€â”€â”€â–¼â”€â”€â”€â”€â”€â”€â”€â”€â”
                       â”‚ report_column â”‚
                       â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”‘ ä¸»è¦ç´¢å¼•è¯´æ˜

### æ€§èƒ½å…³é”®ç´¢å¼•

| è¡¨å | ç´¢å¼•å | å­—æ®µ | ç”¨é€” |
|------|--------|------|------|
| user | idx_username | username | åŠ é€Ÿç”¨æˆ·ç™»å½•æŸ¥è¯¢ï¼ˆçƒ­ç‚¹ï¼‰ |
| report | idx_creator_id | creator_id | æŸ¥è¯¢ç”¨æˆ·åˆ›å»ºçš„æŠ¥è¡¨ |
| report | idx_created_at | created_at | æŠ¥è¡¨åˆ—è¡¨æ’åºã€æ—¶é—´èŒƒå›´æŸ¥è¯¢ |
| audit_log | idx_created_at | created_at | æ—¥å¿—æŸ¥è¯¢ã€æ¸…ç†è¿‡æœŸæ•°æ® |
| audit_log | idx_user_id | user_id | æŸ¥è¯¢ç”¨æˆ·æ“ä½œå†å² |
| audit_log | idx_resource_id | resource_id | æŸ¥è¯¢èµ„æºä¿®æ”¹å†å² |

### å¤–é”®å…³ç³»

æ‰€æœ‰å¤–é”®éƒ½é…ç½®äº† ON DELETE CASCADEï¼Œå³åˆ é™¤ä¸»è¡¨è®°å½•æ—¶è‡ªåŠ¨åˆ é™¤ç›¸å…³çš„ä»è¡¨è®°å½•ï¼š

- åˆ é™¤ role â†’ è‡ªåŠ¨åˆ é™¤ user_roleã€report_role
- åˆ é™¤ user â†’ è‡ªåŠ¨åˆ é™¤ user_roleã€reportï¼ˆå—RESTRICTä¿æŠ¤ï¼‰ã€audit_logï¼ˆå˜ä¸ºNULLï¼‰
- åˆ é™¤ report â†’ è‡ªåŠ¨åˆ é™¤ report_paramã€report_columnã€report_role

---

## ğŸ“ å®¹é‡å’Œæ€§èƒ½è§„åˆ’

### å„è¡¨çš„å®¹é‡ä¼°ç®—ï¼ˆ1å¹´ï¼‰

| è¡¨å | åˆå§‹è®°å½•æ•° | é¢„æœŸè®°å½•æ•° | æ¯æ¡å¤§å° | æ€»å¤§å° | å¤‡æ³¨ |
|------|----------|----------|--------|--------|------|
| role | 3 | 3-10 | 200B | <1KB | å‡ ä¹ä¸å¢é•¿ |
| user | 3 | 50-500 | 300B | 15-150KB | æŒç»­å¢é•¿ |
| user_role | 3 | 50-500 | 16B | <10KB | ä¸useråŒæ­¥å¢é•¿ |
| report | 0 | 50-100 | 1KB | 50-100MB | ä¸»è¦æ•°æ® |
| report_param | 0 | 200-500 | 150B | 30-75KB | éšreportå¢é•¿ |
| report_column | 0 | 500-1500 | 200B | 100-300KB | éšreportå¢é•¿ |
| report_role | 0 | 50-300 | 16B | <10KB | ä¸reportåŒæ­¥å¢é•¿ |
| audit_log | 0 | 3600-18000 | 400B | 1.5-7MB | å¿«é€Ÿå¢é•¿ï¼Œéœ€å®šæœŸæ¸…ç† |
| **åˆè®¡** | **12** | **3903-21010** | - | **çº¦100-200MB** | - |

### æ€§èƒ½é¢„æœŸ

| æ“ä½œ | é¢„æœŸè€—æ—¶ | æ¡ä»¶ |
|------|---------|------|
| ç”¨æˆ·ç™»å½• | <100ms | ä½¿ç”¨idx_usernameç´¢å¼• |
| æŸ¥è¯¢æŠ¥è¡¨åˆ—è¡¨ | <500ms | ä½¿ç”¨idx_creator_idã€åˆ†é¡µ |
| æ‰§è¡ŒSQLæŸ¥è¯¢ | <5ç§’ | åç«¯è®¾ç½®è¶…æ—¶é™åˆ¶ |
| å®¡è®¡æ—¥å¿—æŸ¥è¯¢ | <200ms | ä½¿ç”¨idx_created_atã€åˆ†é¡µ |

---

## ğŸ”’ å®‰å…¨å’Œçº¦æŸ

### æ•°æ®å®‰å…¨æªæ–½

1. **å¯†ç åŠ å¯†**
   - ä½¿ç”¨ BCrypt ç®—æ³•ï¼ˆä¸å¯é€†ï¼‰
   - åº”ç”¨å±‚éªŒè¯ï¼Œä¸åœ¨æ•°æ®åº“å±‚å­˜å‚¨æ˜æ–‡

2. **å¤–é”®çº¦æŸ**
   - ä¿æŠ¤æ•°æ®å®Œæ•´æ€§
   - é˜²æ­¢å­¤ç«‹è®°å½•

3. **å®¡è®¡æ—¥å¿—**
   - è®°å½•æ‰€æœ‰é‡è¦æ“ä½œ
   - ä¾¿äºé—®é¢˜è¿½è¸ªå’Œå®‰å…¨å®¡è®¡

4. **æƒé™éš”ç¦»**
   - é€šè¿‡report_roleè¡¨ç®¡ç†æŠ¥è¡¨æƒé™
   - åº”ç”¨å±‚å¼ºåˆ¶æƒé™æ£€æŸ¥

### ä¸šåŠ¡çº¦æŸ

| çº¦æŸ | è¯´æ˜ | å®ç°æ–¹å¼ |
|------|------|---------|
| username å”¯ä¸€ | é˜²æ­¢é‡å¤ç™»å½•è´¦å· | UNIQUE KEY |
| role_name å”¯ä¸€ | ç³»ç»Ÿè§’è‰²ä¸é‡å¤ | UNIQUE KEY |
| å‚æ•°åå”¯ä¸€ | åŒä¸€æŠ¥è¡¨å†…å‚æ•°ä¸é‡å¤ | UNIQUE KEY (report_id, param_name) |
| åˆ—åå”¯ä¸€ | åŒä¸€æŠ¥è¡¨å†…åˆ—ä¸é‡å¤ | UNIQUE KEY (report_id, field_name) |

---

## ğŸ›  ç»´æŠ¤å»ºè®®

### å®šæœŸç»´æŠ¤ä»»åŠ¡

| ä»»åŠ¡ | é¢‘ç‡ | è¯´æ˜ |
|------|------|------|
| å¤‡ä»½æ•°æ®åº“ | æ¯å¤©1æ¬¡ | å¤‡ä»½åˆ°ç‹¬ç«‹å­˜å‚¨ |
| æ£€æŸ¥è¡¨å¤§å° | æ¯å‘¨1æ¬¡ | å…³æ³¨audit_logè¡¨å¢é•¿ |
| æ¸…ç†è¿‡æœŸæ—¥å¿— | æ¯æœˆ1æ¬¡ | åˆ é™¤>90å¤©çš„audit_logè®°å½• |
| ä¼˜åŒ–è¡¨ç»“æ„ | æ¯å­£åº¦1æ¬¡ | è¿è¡ŒOPTIMIZE TABLEã€ANALYZE TABLE |
| æ£€æŸ¥ç´¢å¼•æ•ˆç‡ | æ¯å­£åº¦1æ¬¡ | è¿è¡ŒEXPLAINåˆ†ææ…¢æŸ¥è¯¢ |

### å¤‡ä»½å’Œæ¢å¤

**å¤‡ä»½å‘½ä»¤**:
```bash
# å®Œæ•´å¤‡ä»½
mysqldump -h localhost -u root -p programmer_report > backup-full-$(date +%Y%m%d).sql

# ä»…å¤‡ä»½è¡¨ç»“æ„
mysqldump -h localhost -u root -p --no-data programmer_report > backup-schema-$(date +%Y%m%d).sql

# ä»…å¤‡ä»½æ•°æ®
mysqldump -h localhost -u root -p --no-create-info programmer_report > backup-data-$(date +%Y%m%d).sql
```

**æ¢å¤å‘½ä»¤**:
```bash
# æ¢å¤å®Œæ•´æ•°æ®
mysql -h localhost -u root -p programmer_report < backup-full-20251226.sql

# åœ¨MySQLå®¢æˆ·ç«¯ä¸­æ¢å¤
mysql> USE programmer_report;
mysql> SOURCE backup-full-20251226.sql;
```

### å¸¸è§é—®é¢˜æ’æŸ¥

| é—®é¢˜ | åŸå›  | è§£å†³æ–¹æ¡ˆ |
|------|------|---------|
| ç™»å½•ç¼“æ…¢ | ç¼ºå°‘ idx_username ç´¢å¼• | æ£€æŸ¥ç´¢å¼•æ˜¯å¦å­˜åœ¨ï¼šSHOW INDEX FROM user; |
| æŸ¥è¯¢è¶…æ—¶ | SQLè¿‡äºå¤æ‚ã€æ— ç´¢å¼• | ä½¿ç”¨EXPLAINåˆ†æSQLæ‰§è¡Œè®¡åˆ’ |
| ç£ç›˜ç©ºé—´ä¸è¶³ | audit_logè¡¨è¿‡å¤§ | æ¸…ç†è¿‡æœŸæ—¥å¿—ï¼šDELETE FROM audit_log WHERE created_at < DATE_SUB(NOW(), INTERVAL 90 DAY); |
| æ•°æ®ä¸ä¸€è‡´ | å¤–é”®çº¦æŸå†²çª | æ£€æŸ¥å¤–é”®å…³ç³»ï¼šSELECT * FROM INFORMATION_SCHEMA.KEY_COLUMN_USAGE; |

---

## ğŸ“ å˜æ›´å†å²

| ç‰ˆæœ¬ | æ—¥æœŸ | è¯´æ˜ |
|------|------|------|
| v1.0 | 2025-12-26 | åˆå§‹ç‰ˆæœ¬ï¼ŒåŒ…å«8ä¸ªè¡¨çš„å®Œæ•´è®¾è®¡ |

---

## ğŸ“ ç›¸å…³æ–‡æ¡£

- [SQLåˆå§‹åŒ–è„šæœ¬](init-database.sql) - æ•°æ®åº“å»ºè¡¨å’Œåˆå§‹åŒ–è„šæœ¬
- [Must-Haveç”¨æˆ·æ•…äº‹è¯¦ç»†æ¸…å•](../Must-Haveç”¨æˆ·æ•…äº‹è¯¦ç»†æ¸…å•.md) - éœ€æ±‚æ–‡æ¡£
- [Sprint-Backlog-ä»»åŠ¡æ‹†è§£ä¸ä¼°ç®—](../Sprint-Backlog-ä»»åŠ¡æ‹†è§£ä¸ä¼°ç®—-ç¨‹åºå‘˜æŠ¥è¡¨ç”Ÿæˆå·¥å…·MVP.md) - å¼€å‘ä»»åŠ¡æ¸…å•
- [ADR-001æŠ€æœ¯æ ˆé€‰å‹](../ADR-001-æŠ€æœ¯æ ˆé€‰å‹ä¸æ¶æ„å†³ç­–.md) - æŠ€æœ¯å†³ç­–

---

**æ–‡æ¡£ç‰ˆæœ¬**: v1.0  
**æœ€åæ›´æ–°**: 2025-12-26  
**ä½œè€…**: AI Database Architect  
**å®¡æ ¸çŠ¶æ€**: â³ å¾…DBAå®¡æ ¸

**å…³é”®è¦ç‚¹**:
âœ… 8ä¸ªè¡¨ï¼Œæ ¸å¿ƒè¡¨ç»“æ„å®Œæ•´  
âœ… ç´¢å¼•ä¼˜åŒ–ï¼Œæ€§èƒ½å°±ç»ª  
âœ… çº¦æŸå®Œå–„ï¼Œæ•°æ®å®‰å…¨  
âœ… å®¹é‡è§„åˆ’ï¼Œæ”¯æŒ1å¹´æ•°æ®å¢é•¿  
ğŸ¯ **Ready for Development!**
